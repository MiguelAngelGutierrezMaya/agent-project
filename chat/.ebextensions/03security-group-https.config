###############################################################################
# Security Group Configuration for HTTPS
#
# This file automatically configures the Security Group to allow:
# - Port 80 (HTTP) - Required for Let's Encrypt validation
# - Port 443 (HTTPS) - Required for HTTPS traffic
#
# IMPORTANT: This uses CloudFormation resources to modify the Security Group
# that Elastic Beanstalk creates automatically for your environment.
#
###############################################################################

Resources:
  HttpSecurityGroupIngress:
    Type: AWS::EC2::SecurityGroupIngress
    Properties:
      GroupId:
        Fn::GetAtt:
          - AWSEBSecurityGroup
          - GroupId
      IpProtocol: tcp
      FromPort: 80
      ToPort: 80
      CidrIp: 0.0.0.0/0
      Description: Allow HTTP traffic port 80

  HttpsSecurityGroupIngress:
    Type: AWS::EC2::SecurityGroupIngress
    Properties:
      GroupId:
        Fn::GetAtt:
          - AWSEBSecurityGroup
          - GroupId
      IpProtocol: tcp
      FromPort: 443
      ToPort: 443
      CidrIp: 0.0.0.0/0
      Description: Allow HTTPS traffic port 443

###############################################################################
# Notes:
# - This configuration is applied automatically on deployment
# - Port 80 is needed for Let's Encrypt certificate validation
# - Port 443 is needed for HTTPS traffic
# - Rules allow traffic from anywhere (0.0.0.0/0) - adjust if needed for production
# - These rules are idempotent (safe to deploy multiple times)
###############################################################################

